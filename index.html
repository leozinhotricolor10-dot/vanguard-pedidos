<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Vanguard Peptides ‚Äî Pedidos</title>
<link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Syne:wght@400;600;700;800&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.2/babel.min.js"></script>
<style>
:root {
  --bg: #050a0e;
  --bg2: #0a1219;
  --bg3: #0f1c28;
  --accent: #00e5c3;
  --accent2: #00a8ff;
  --warn: #ff6b35;
  --text: #e2eaf0;
  --muted: #5a7a8a;
  --border: rgba(0,229,195,0.12);
  --card: rgba(10,18,25,0.85);
}
* { margin:0; padding:0; box-sizing:border-box; }
body { background: var(--bg); color: var(--text); font-family: 'DM Sans', sans-serif; min-height: 100vh; overflow-x: hidden; }
body::before {
  content: ''; position: fixed; inset: 0;
  background-image: linear-gradient(rgba(0,229,195,0.02) 1px, transparent 1px), linear-gradient(90deg, rgba(0,229,195,0.02) 1px, transparent 1px);
  background-size: 40px 40px; pointer-events: none; z-index: 0;
}
.glow-bg { position: fixed; width: 600px; height: 600px; background: radial-gradient(circle, rgba(0,229,195,0.06) 0%, transparent 70%); top: -100px; left: -100px; pointer-events: none; z-index: 0; animation: blobMove 12s ease-in-out infinite alternate; }
.glow-bg2 { position: fixed; width: 400px; height: 400px; background: radial-gradient(circle, rgba(0,168,255,0.05) 0%, transparent 70%); bottom: 0; right: 0; pointer-events: none; z-index: 0; animation: blobMove2 15s ease-in-out infinite alternate; }
@keyframes blobMove { from { transform: translate(0,0); } to { transform: translate(100px, 150px); } }
@keyframes blobMove2 { from { transform: translate(0,0); } to { transform: translate(-80px, -120px); } }
@keyframes fadeUp { from { opacity:0; transform: translateY(16px); } to { opacity:1; transform: translateY(0); } }
@keyframes pulse { 0%,100% { opacity:1; transform:scale(1); } 50% { opacity:0.5; transform:scale(0.8); } }
@keyframes slideIn { from { opacity:0; transform: translateY(24px) scale(0.97); } to { opacity:1; transform: translateY(0) scale(1); } }
@keyframes popIn { from { opacity:0; transform: scale(0.85); } to { opacity:1; transform: scale(1); } }

/* NAV */
nav {
  position: fixed; top:0; left:0; right:0; z-index:100;
  display: flex; align-items: center; justify-content: space-between;
  padding: 0 32px; height: 60px;
  background: rgba(5,10,14,0.92); backdrop-filter: blur(14px);
  border-bottom: 1px solid var(--border);
}
.logo { font-family: 'Syne', sans-serif; font-weight: 800; font-size: 1.15rem; letter-spacing: -0.5px; color: var(--accent); display: flex; align-items: center; gap: 10px; }
.logo-dot { width: 8px; height: 8px; background: var(--accent); border-radius: 50%; animation: pulse 2s ease-in-out infinite; box-shadow: 0 0 12px var(--accent); }
.logo-sub { font-family: 'Space Mono', monospace; font-size: 0.62rem; color: var(--muted); letter-spacing: 2px; margin-left: 2px; }
.nav-right { display: flex; align-items: center; gap: 10px; }
.nav-btn { background: transparent; border: 1px solid var(--border); color: var(--muted); font-family: 'Space Mono', monospace; font-size: 0.68rem; padding: 6px 14px; border-radius: 8px; cursor: pointer; transition: all 0.2s; }
.nav-btn:hover { border-color: rgba(0,229,195,0.35); color: var(--accent); }
.nav-btn.active { background: rgba(0,229,195,0.08); border-color: rgba(0,229,195,0.3); color: var(--accent); }
.cart-nav-btn { position: relative; background: transparent; border: 1px solid var(--border); color: var(--muted); font-family: 'Space Mono', monospace; font-size: 0.68rem; padding: 6px 14px; border-radius: 8px; cursor: pointer; transition: all 0.2s; display: flex; align-items: center; gap: 6px; }
.cart-nav-btn:hover, .cart-nav-btn.active { background: rgba(0,229,195,0.08); border-color: rgba(0,229,195,0.3); color: var(--accent); }
.cart-badge { background: var(--accent); color: #050a0e; font-size: 0.6rem; font-weight: 700; padding: 1px 6px; border-radius: 99px; font-family: 'Syne', sans-serif; animation: popIn 0.2s ease forwards; }

/* LAYOUT */
.app { position: relative; z-index: 1; display: grid; grid-template-columns: 248px 1fr; min-height: 100vh; padding-top: 60px; }

/* SIDEBAR */
aside {
  position: sticky; top: 60px; height: calc(100vh - 60px); overflow-y: auto;
  padding: 20px 12px; border-right: 1px solid var(--border);
  background: rgba(5,10,14,0.6); display: flex; flex-direction: column;
}
aside::-webkit-scrollbar { width: 3px; }
aside::-webkit-scrollbar-thumb { background: var(--border); border-radius: 4px; }
.name-input-label { font-family: 'Space Mono', monospace; font-size: 0.58rem; color: var(--muted); letter-spacing: 2px; text-transform: uppercase; margin-bottom: 6px; display: block; padding-left: 2px; }
.name-input { width: 100%; background: rgba(255,255,255,0.03); border: 1px solid var(--border); border-radius: 8px; padding: 9px 12px; color: var(--text); font-family: 'DM Sans', sans-serif; font-size: 0.85rem; outline: none; transition: border-color 0.2s; margin-bottom: 18px; }
.name-input:focus { border-color: rgba(0,229,195,0.4); }
.name-input::placeholder { color: var(--muted); }
.sidebar-section-title { font-family: 'Space Mono', monospace; font-size: 0.58rem; color: var(--muted); letter-spacing: 2px; text-transform: uppercase; margin-bottom: 8px; padding-left: 10px; }
.cat-btn { display: flex; align-items: center; gap: 10px; padding: 8px 10px; border-radius: 8px; cursor: pointer; transition: background 0.15s; width: 100%; background: none; border: none; color: var(--text); margin-bottom: 1px; }
.cat-btn:hover { background: rgba(0,229,195,0.05); }
.cat-btn.active { background: rgba(0,229,195,0.08); }
.cat-btn.active .cat-btn-name { color: var(--accent); }
.cat-btn-icon { width: 28px; height: 28px; border-radius: 7px; display: flex; align-items: center; justify-content: center; font-size: 13px; flex-shrink: 0; }
.cat-btn-name { font-size: 0.82rem; font-weight: 600; flex: 1; text-align: left; }
.cat-btn-count { font-family: 'Space Mono', monospace; font-size: 0.65rem; color: var(--muted); }
.sidebar-divider { height: 1px; background: var(--border); margin: 14px 0; }
.cart-mini { background: rgba(0,229,195,0.05); border: 1px solid rgba(0,229,195,0.15); border-radius: 10px; padding: 12px 14px; cursor: pointer; transition: border-color 0.2s; }
.cart-mini:hover { border-color: rgba(0,229,195,0.3); }
.cart-mini-label { font-family: 'Space Mono', monospace; font-size: 0.58rem; color: var(--muted); letter-spacing: 1.5px; margin-bottom: 4px; }
.cart-mini-total { font-family: 'Syne', sans-serif; font-size: 1.25rem; font-weight: 800; color: var(--accent); }
.cart-mini-sub { font-size: 0.72rem; color: var(--muted); margin-top: 2px; }
.copy-btn { width: 100%; margin-top: 10px; background: transparent; border: 1px solid var(--border); color: var(--muted); font-family: 'Space Mono', monospace; font-size: 0.65rem; padding: 8px; border-radius: 8px; cursor: pointer; transition: all 0.2s; }
.copy-btn:hover { border-color: rgba(0,229,195,0.35); color: var(--accent); }

/* MAIN */
main { padding: 36px 44px; max-width: 980px; }
.view { display: none; animation: fadeUp 0.4s ease forwards; }
.view.visible { display: block; }
.page-tag { display: inline-flex; align-items: center; gap: 6px; background: rgba(0,229,195,0.08); border: 1px solid rgba(0,229,195,0.2); color: var(--accent); font-size: 0.68rem; font-family: 'Space Mono', monospace; padding: 4px 12px; border-radius: 4px; margin-bottom: 12px; letter-spacing: 1px; }
.page-title { font-family: 'Syne', sans-serif; font-size: 2rem; font-weight: 800; letter-spacing: -1px; background: linear-gradient(135deg, #e2eaf0 0%, var(--accent) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 6px; }
.page-sub { font-size: 0.9rem; color: var(--muted); max-width: 500px; line-height: 1.6; margin-bottom: 32px; }

/* CATEGORY */
.cat-section { margin-bottom: 44px; }
.cat-section-header { display: flex; align-items: center; gap: 12px; margin-bottom: 18px; padding-bottom: 12px; border-bottom: 1px solid var(--border); }
.cat-section-icon { width: 36px; height: 36px; border-radius: 9px; display: flex; align-items: center; justify-content: center; font-size: 16px; }
.cat-section-title { font-family: 'Syne', sans-serif; font-size: 1rem; font-weight: 700; }
.cat-section-count { font-family: 'Space Mono', monospace; font-size: 0.68rem; color: var(--muted); background: rgba(255,255,255,0.04); border: 1px solid var(--border); padding: 2px 10px; border-radius: 20px; margin-left: auto; }

/* PRODUCT CARDS */
.products-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(270px, 1fr)); gap: 14px; }
.product-card { background: var(--card); border: 1px solid var(--border); border-radius: 14px; padding: 20px; transition: all 0.22s; position: relative; overflow: hidden; display: flex; flex-direction: column; }
.product-card::before { content:''; position:absolute; top:0; left:0; right:0; height:2px; background: linear-gradient(90deg, var(--accent), var(--accent2)); transform: scaleX(0); transform-origin: left; transition: transform 0.3s; }
.product-card:hover { border-color: rgba(0,229,195,0.3); transform: translateY(-3px); box-shadow: 0 12px 32px rgba(0,0,0,0.3); }
.product-card:hover::before { transform: scaleX(1); }
.product-card.in-cart { border-color: rgba(0,229,195,0.25); background: rgba(0,229,195,0.03); }
.product-card-name { font-family: 'Syne', sans-serif; font-size: 0.95rem; font-weight: 700; color: var(--text); margin-bottom: 4px; line-height: 1.3; }
.product-card-desc { font-size: 0.75rem; color: var(--muted); margin-bottom: 14px; line-height: 1.5; flex: 1; }
.product-card-price { font-family: 'Space Mono', monospace; font-size: 1.15rem; font-weight: 700; color: var(--accent); margin-bottom: 14px; }
.product-card-price span { font-size: 0.68rem; color: var(--muted); font-weight: 400; }
.in-cart-indicator { display: flex; align-items: center; justify-content: space-between; background: rgba(0,229,195,0.07); border: 1px solid rgba(0,229,195,0.2); border-radius: 8px; padding: 8px 12px; margin-bottom: 10px; }
.in-cart-text { font-family: 'Space Mono', monospace; font-size: 0.68rem; color: var(--accent); }
.in-cart-qty-controls { display: flex; align-items: center; gap: 8px; }
.qty-control-btn { background: rgba(0,229,195,0.1); border: 1px solid rgba(0,229,195,0.25); color: var(--accent); width: 24px; height: 24px; border-radius: 6px; cursor: pointer; font-size: 0.9rem; font-weight: 700; display: flex; align-items: center; justify-content: center; transition: background 0.15s; }
.qty-control-btn:hover { background: rgba(0,229,195,0.2); }
.qty-control-num { font-family: 'Space Mono', monospace; font-size: 0.82rem; color: var(--text); min-width: 18px; text-align: center; }
.add-to-cart-btn { width: 100%; padding: 10px; border-radius: 9px; border: 1px solid rgba(0,229,195,0.35); background: transparent; color: var(--accent); font-family: 'Space Mono', monospace; font-size: 0.72rem; cursor: pointer; transition: all 0.2s; font-weight: 700; letter-spacing: 0.5px; }
.add-to-cart-btn:hover { background: rgba(0,229,195,0.08); }

/* CART VIEW */
.cart-empty { text-align: center; padding: 80px 20px; }
.cart-empty-icon { font-size: 2.8rem; margin-bottom: 16px; }
.cart-empty-title { font-family: 'Syne', sans-serif; font-size: 1.1rem; font-weight: 700; margin-bottom: 6px; }
.cart-empty-sub { font-size: 0.85rem; color: var(--muted); }
.cart-items { display: flex; flex-direction: column; gap: 10px; margin-bottom: 20px; }
.cart-item-card { background: var(--card); border: 1px solid var(--border); border-radius: 12px; padding: 16px 20px; display: flex; align-items: center; gap: 16px; animation: fadeUp 0.3s ease forwards; transition: border-color 0.2s; }
.cart-item-card:hover { border-color: rgba(0,229,195,0.2); }
.cart-item-emoji { width: 36px; height: 36px; border-radius: 9px; display: flex; align-items: center; justify-content: center; font-size: 15px; flex-shrink: 0; }
.cart-item-info { flex: 1; }
.cart-item-name { font-family: 'Syne', sans-serif; font-size: 0.9rem; font-weight: 700; margin-bottom: 2px; }
.cart-item-buyer { font-size: 0.75rem; color: var(--muted); }
.cart-item-qty-wrap { display: flex; align-items: center; gap: 8px; }
.cart-item-price { font-family: 'Space Mono', monospace; font-size: 0.88rem; color: var(--accent2); font-weight: 700; min-width: 80px; text-align: right; }
.cart-item-remove { background: none; border: none; color: var(--muted); cursor: pointer; font-size: 1rem; padding: 4px; border-radius: 6px; transition: color 0.2s; }
.cart-item-remove:hover { color: var(--warn); }
.cart-summary { background: var(--card); border: 1px solid var(--border); border-radius: 14px; padding: 20px 22px; }
.cart-summary-row { display: flex; justify-content: space-between; font-size: 0.88rem; color: var(--muted); margin-bottom: 10px; }
.cart-summary-row span:last-child { color: var(--text); font-family: 'Space Mono', monospace; }
.cart-summary-total { display: flex; justify-content: space-between; align-items: center; padding-top: 14px; margin-top: 4px; border-top: 1px solid var(--border); }
.cart-summary-total-label { font-size: 0.95rem; color: var(--text); }
.cart-summary-total-value { font-family: 'Syne', sans-serif; font-size: 1.6rem; font-weight: 800; color: var(--accent); }
.cart-note { background: rgba(255,160,50,0.06); border: 1px solid rgba(255,160,50,0.2); border-radius: 10px; padding: 12px 16px; font-size: 0.79rem; color: #a8bfc9; line-height: 1.7; margin-top: 14px; }
.checkout-btn { width: 100%; margin-top: 14px; padding: 14px; border-radius: 11px; border: none; background: linear-gradient(135deg, var(--accent), var(--accent2)); color: #050a0e; font-family: 'Syne', sans-serif; font-size: 0.95rem; font-weight: 800; cursor: pointer; transition: filter 0.2s; letter-spacing: 0.3px; }
.checkout-btn:hover { filter: brightness(1.08); }

/* ADMIN */
.admin-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin-bottom: 24px; }
.admin-stat { background: var(--card); border: 1px solid var(--border); border-radius: 12px; padding: 16px 18px; }
.admin-stat-label { font-family: 'Space Mono', monospace; font-size: 0.58rem; color: var(--muted); letter-spacing: 1.5px; text-transform: uppercase; margin-bottom: 6px; }
.admin-stat-value { font-family: 'Syne', sans-serif; font-size: 1.5rem; font-weight: 800; color: var(--accent); }
.admin-table { background: var(--card); border: 1px solid var(--border); border-radius: 14px; overflow: hidden; }
.admin-table-header { display: grid; grid-template-columns: 2fr 1fr 1fr 1fr 80px; padding: 12px 20px; background: rgba(0,229,195,0.05); border-bottom: 1px solid var(--border); font-family: 'Space Mono', monospace; font-size: 0.6rem; color: var(--muted); letter-spacing: 1.5px; text-transform: uppercase; }
.admin-table-row { display: grid; grid-template-columns: 2fr 1fr 1fr 1fr 80px; padding: 14px 20px; border-bottom: 1px solid rgba(255,255,255,0.03); align-items: center; font-size: 0.85rem; transition: background 0.15s; }
.admin-table-row:hover { background: rgba(255,255,255,0.02); }
.admin-table-row:last-child { border-bottom: none; }
.admin-row-name { font-weight: 600; }
.admin-row-buyer { color: var(--muted); font-size: 0.78rem; margin-top: 2px; }
.admin-row-qty { font-family: 'Space Mono', monospace; font-size: 0.82rem; }
.admin-row-price { font-family: 'Space Mono', monospace; color: var(--accent2); }
.admin-row-total { font-family: 'Space Mono', monospace; color: var(--accent); font-weight: 700; }
.admin-remove-btn { background: none; border: 1px solid rgba(255,107,53,0.25); color: rgba(255,107,53,0.7); font-family: 'Space Mono', monospace; font-size: 0.62rem; padding: 4px 10px; border-radius: 6px; cursor: pointer; transition: all 0.2s; }
.admin-remove-btn:hover { background: rgba(255,107,53,0.08); color: var(--warn); border-color: var(--warn); }
.admin-actions { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 20px; }
.admin-action-btn { font-family: 'Space Mono', monospace; font-size: 0.7rem; padding: 9px 18px; border-radius: 8px; border: 1px solid var(--border); background: transparent; color: var(--text); cursor: pointer; transition: all 0.2s; }
.admin-action-btn:hover { border-color: rgba(0,229,195,0.35); color: var(--accent); background: rgba(0,229,195,0.04); }
.admin-action-btn.danger { border-color: rgba(255,107,53,0.3); color: var(--warn); }
.admin-action-btn.danger:hover { background: rgba(255,107,53,0.06); }

/* MODAL */
.modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.75); z-index: 200; display: flex; align-items: flex-end; justify-content: center; backdrop-filter: blur(4px); }
.modal-overlay.center { align-items: center; }
.modal { background: #0a1219; border: 1px solid var(--border); border-radius: 20px 20px 0 0; padding: 28px 24px; width: 100%; max-width: 480px; animation: slideIn 0.25s ease forwards; }
.modal.center-modal { border-radius: 20px; max-width: 400px; margin: 16px; }
.modal-title { font-family: 'Syne', sans-serif; font-size: 1.1rem; font-weight: 700; color: var(--text); margin-bottom: 4px; }
.modal-sub { font-size: 0.8rem; color: var(--muted); margin-bottom: 22px; }
.modal-label { font-family: 'Space Mono', monospace; font-size: 0.62rem; color: var(--muted); letter-spacing: 1.5px; text-transform: uppercase; margin-bottom: 6px; display: block; }
.modal-input { width: 100%; background: rgba(255,255,255,0.03); border: 1px solid var(--border); border-radius: 9px; padding: 10px 14px; color: var(--text); font-family: 'DM Sans', sans-serif; font-size: 0.9rem; outline: none; transition: border-color 0.2s; margin-bottom: 16px; }
.modal-input:focus { border-color: rgba(0,229,195,0.4); }
.qty-row { display: flex; align-items: center; gap: 16px; margin-bottom: 18px; }
.qty-big-btn { width: 40px; height: 40px; border-radius: 10px; border: 1px solid var(--border); background: rgba(255,255,255,0.03); color: var(--text); font-size: 1.2rem; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.15s; }
.qty-big-btn:hover { border-color: rgba(0,229,195,0.4); color: var(--accent); }
.qty-big-num { font-family: 'Syne', sans-serif; font-size: 2rem; font-weight: 800; color: var(--text); flex: 1; text-align: center; }
.price-preview { background: rgba(0,229,195,0.05); border: 1px solid rgba(0,229,195,0.15); border-radius: 10px; padding: 14px 16px; margin-bottom: 18px; display: flex; justify-content: space-between; align-items: center; }
.price-preview-label { font-size: 0.82rem; color: var(--muted); }
.price-preview-value { font-family: 'Space Mono', monospace; font-size: 0.95rem; font-weight: 700; color: var(--accent); }
.modal-confirm-btn { width: 100%; padding: 13px; border-radius: 11px; border: none; background: linear-gradient(135deg, var(--accent), var(--accent2)); color: #050a0e; font-family: 'Syne', sans-serif; font-size: 0.95rem; font-weight: 800; cursor: pointer; transition: filter 0.2s; letter-spacing: 0.3px; }
.modal-confirm-btn:hover:not(:disabled) { filter: brightness(1.08); }
.modal-confirm-btn:disabled { opacity: 0.3; cursor: not-allowed; }
.modal-cancel-btn { width: 100%; padding: 11px; border-radius: 11px; border: 1px solid var(--border); background: transparent; color: var(--muted); font-family: 'Space Mono', monospace; font-size: 0.75rem; cursor: pointer; transition: all 0.2s; margin-top: 8px; }
.modal-cancel-btn:hover { color: var(--text); border-color: rgba(255,255,255,0.2); }

/* TOAST */
.toast { position: fixed; top: 76px; left: 50%; transform: translateX(-50%); padding: 10px 20px; border-radius: 10px; font-size: 0.82rem; font-family: 'DM Sans', sans-serif; z-index: 999; box-shadow: 0 8px 24px rgba(0,0,0,0.5); animation: fadeUp 0.25s ease forwards; pointer-events: none; white-space: nowrap; }
.toast.success { background: rgba(0,229,195,0.12); border: 1px solid rgba(0,229,195,0.3); color: var(--accent); }
.toast.error { background: rgba(255,80,60,0.12); border: 1px solid rgba(255,80,60,0.3); color: #ff6b5b; }
.toast.info { background: rgba(0,168,255,0.12); border: 1px solid rgba(0,168,255,0.3); color: var(--accent2); }

/* CHECKOUT MODAL */
.checkout-modal { background: #0a1219; border: 1px solid var(--border); border-radius: 20px 20px 0 0; padding: 28px 24px 32px; width: 100%; max-width: 520px; animation: slideIn 0.25s ease forwards; max-height: 90vh; overflow-y: auto; }
.checkout-modal::-webkit-scrollbar { width: 3px; }
.checkout-modal::-webkit-scrollbar-thumb { background: var(--border); border-radius: 4px; }
.checkout-section { margin-bottom: 22px; }
.checkout-section-title { font-family: 'Space Mono', monospace; font-size: 0.6rem; color: var(--accent); text-transform: uppercase; letter-spacing: 2px; margin-bottom: 12px; padding-bottom: 8px; border-bottom: 1px solid var(--border); }
.input-row { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
.input-group { margin-bottom: 12px; }
.input-group label { display: block; font-family: 'Space Mono', monospace; font-size: 0.6rem; color: var(--muted); letter-spacing: 1.5px; text-transform: uppercase; margin-bottom: 5px; }
.input-group input { width: 100%; background: rgba(255,255,255,0.03); border: 1px solid var(--border); border-radius: 9px; padding: 10px 14px; color: var(--text); font-family: 'DM Sans', sans-serif; font-size: 0.88rem; outline: none; transition: border-color 0.2s; box-sizing: border-box; }
.input-group input:focus { border-color: rgba(0,229,195,0.4); }
.input-group input.error { border-color: rgba(255,107,53,0.5); }
.input-group input::placeholder { color: var(--muted); }
.freight-box { border-radius: 11px; padding: 14px 16px; display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px; }
.freight-box.free { background: rgba(0,229,195,0.06); border: 1px solid rgba(0,229,195,0.2); }
.freight-box.paid { background: rgba(255,107,53,0.06); border: 1px solid rgba(255,107,53,0.2); }
.freight-label { font-size: 0.82rem; }
.freight-label strong { display: block; font-family: 'Syne', sans-serif; font-size: 0.9rem; }
.freight-label small { color: var(--muted); font-size: 0.74rem; }
.freight-value { font-family: 'Space Mono', monospace; font-size: 1rem; font-weight: 700; }
.freight-value.free { color: var(--accent); }
.freight-value.paid { color: var(--warn); }
.order-total-row { display: flex; justify-content: space-between; align-items: center; padding: 14px 0 4px; border-top: 1px solid var(--border); margin-top: 6px; }
.order-total-label { font-size: 0.88rem; color: var(--muted); }
.order-total-value { font-family: 'Syne', sans-serif; font-size: 1.5rem; font-weight: 800; color: var(--accent); }

@media (max-width: 768px) {
  .app { grid-template-columns: 1fr; }
  aside { position: relative; top: auto; height: auto; border-right: none; border-bottom: 1px solid var(--border); flex-direction: row; flex-wrap: wrap; gap: 8px; padding: 14px; }
  main { padding: 20px 16px; }
  .products-grid { grid-template-columns: 1fr; }
  nav { padding: 0 16px; }
  .admin-grid { grid-template-columns: 1fr 1fr; }
  .admin-table-header, .admin-table-row { grid-template-columns: 2fr 1fr 1fr; }
  .admin-table-header > *:nth-child(4), .admin-table-row > *:nth-child(4) { display: none; }
  .calc-body { grid-template-columns: 1fr !important; }
}
/* CALCULATOR */
.calc-body { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; align-items: start; }
.calc-card { background: rgba(255,255,255,0.02); border: 1px solid var(--border); border-radius: 16px; padding: 24px; margin-bottom: 16px; }
.calc-card:last-child { margin-bottom: 0; }
.calc-card-title { font-family: 'Space Mono', monospace; font-size: 0.65rem; color: var(--accent); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 18px; }
.calc-label { font-size: 0.77rem; color: var(--muted); margin-bottom: 8px; font-weight: 500; }
.calc-search-wrap { position: relative; }
.calc-input { width: 100%; background: rgba(255,255,255,0.03); border: 1px solid var(--border); border-radius: 10px; color: var(--text); font-size: 0.88rem; padding: 11px 16px; outline: none; transition: border-color 0.2s; box-sizing: border-box; font-family: 'DM Sans', sans-serif; }
.calc-input:focus { border-color: rgba(0,229,195,0.4); }
.calc-dropdown { position: absolute; top: calc(100% + 4px); left: 0; right: 0; background: #0e1822; border: 1px solid var(--border); border-radius: 10px; z-index: 200; max-height: 200px; overflow-y: auto; box-shadow: 0 12px 32px rgba(0,0,0,0.4); }
.calc-drop-item { padding: 10px 14px; cursor: pointer; font-size: 0.85rem; color: #a8bfc9; display: flex; align-items: center; justify-content: space-between; border-bottom: 1px solid rgba(255,255,255,0.04); transition: background 0.15s; }
.calc-drop-item:last-child { border-bottom: none; }
.calc-drop-item:hover { background: rgba(0,229,195,0.07); color: var(--text); }
.calc-drop-item em { font-style: normal; color: var(--muted); font-family: 'Space Mono', monospace; font-size: 0.62rem; }
.calc-chip-selected { display: flex; align-items: center; gap: 10px; margin-top: 10px; background: rgba(0,229,195,0.07); border: 1px solid rgba(0,229,195,0.2); border-radius: 9px; padding: 9px 13px; }
.calc-chip-name { font-family: 'Syne', sans-serif; font-weight: 700; font-size: 0.88rem; color: var(--text); flex: 1; }
.calc-chip-cat { font-family: 'Space Mono', monospace; font-size: 0.62rem; color: var(--muted); }
.calc-chip-clear { background: none; border: none; color: var(--muted); cursor: pointer; font-size: 1.2rem; line-height: 1; padding: 0; transition: color 0.2s; }
.calc-chip-clear:hover { color: var(--text); }
.chips-grid { display: flex; flex-wrap: wrap; gap: 7px; margin-bottom: 10px; }
.calc-chip-btn { background: rgba(255,255,255,0.03); border: 1px solid var(--border); border-radius: 8px; color: #a8bfc9; font-family: 'Space Mono', monospace; font-size: 0.7rem; padding: 7px 12px; cursor: pointer; transition: all 0.18s; white-space: nowrap; }
.calc-chip-btn:hover { border-color: rgba(0,229,195,0.3); color: var(--text); }
.calc-chip-btn.active { background: rgba(0,229,195,0.08); border-color: rgba(0,229,195,0.35); color: var(--accent); }
.calc-manual-wrap { display: flex; gap: 7px; align-items: center; margin-top: 4px; }
.calc-manual-input { flex: 1; background: rgba(255,255,255,0.03); border: 1px solid var(--border); border-radius: 8px; color: var(--text); font-size: 0.85rem; padding: 9px 12px; outline: none; transition: border-color 0.2s; font-family: 'Space Mono', monospace; }
.calc-manual-input:focus { border-color: rgba(0,229,195,0.4); }
.calc-manual-unit { font-family: 'Space Mono', monospace; font-size: 0.7rem; color: var(--muted); background: rgba(255,255,255,0.04); border: 1px solid var(--border); border-radius: 7px; padding: 9px 11px; white-space: nowrap; }
.calc-result-row { display: flex; justify-content: space-between; align-items: baseline; padding: 11px 0; border-bottom: 1px solid rgba(255,255,255,0.05); }
.calc-result-row:last-child { border-bottom: none; }
.calc-result-label { font-size: 0.8rem; color: var(--muted); }
.calc-result-value { font-family: 'Space Mono', monospace; font-size: 0.85rem; color: var(--text); font-weight: 600; }
.calc-result-value.accent { color: var(--accent); font-size: 0.95rem; }
.calc-recon { margin-top: 18px; padding-top: 18px; border-top: 1px solid var(--border); }
.calc-recon-title { font-family: 'Space Mono', monospace; font-size: 0.6rem; color: var(--muted); text-transform: uppercase; letter-spacing: 0.8px; margin-bottom: 12px; }
.calc-bac-row { display: flex; align-items: center; gap: 8px; margin-bottom: 12px; flex-wrap: wrap; }
.calc-bac-label { font-size: 0.77rem; color: var(--muted); white-space: nowrap; }
.calc-bac-input { width: 76px; background: rgba(255,255,255,0.03); border: 1px solid var(--border); border-radius: 7px; color: var(--text); font-size: 0.85rem; padding: 7px 10px; outline: none; font-family: 'Space Mono', monospace; transition: border-color 0.2s; }
.calc-bac-input:focus { border-color: rgba(0,229,195,0.4); }
.calc-recon-result { background: rgba(0,229,195,0.04); border: 1px solid rgba(0,229,195,0.12); border-radius: 10px; padding: 14px 16px; }
.calc-recon-row { display: flex; justify-content: space-between; align-items: baseline; padding: 5px 0; font-size: 0.82rem; }
.calc-recon-key { color: var(--muted); }
.calc-recon-val { font-family: 'Space Mono', monospace; color: var(--accent); font-weight: 600; }
.calc-duration-bar { margin-top: 7px; height: 3px; background: rgba(255,255,255,0.06); border-radius: 3px; overflow: hidden; }
.calc-duration-fill { height: 100%; background: var(--accent); border-radius: 3px; transition: width 0.4s ease; }
.calc-placeholder { text-align: center; padding: 50px 20px; color: var(--muted); }
.calc-placeholder-icon { font-size: 2.2rem; opacity: 0.25; margin-bottom: 10px; }
.calc-placeholder-text { font-size: 0.85rem; }
.calc-topical-notice { background: rgba(255,160,50,0.06); border: 1px solid rgba(255,160,50,0.2); border-radius: 10px; padding: 14px 16px; font-size: 0.82rem; color: #a8bfc9; line-height: 1.7; margin-top: 10px; }
</style>
</head>
<body>
<div class="glow-bg"></div>
<div class="glow-bg2"></div>
<div id="root"></div>
<script type="text/babel">
const { useState, useMemo } = React;
const ADMIN_PASS = "157842";

const CATEGORIES = [
  { id: "all",          name: "Todos",               icon: "üß¨", color: "rgba(0,229,195,0.15)" },
  { id: "emagrecedores",name: "Emagrecedores",        icon: "üíâ", color: "rgba(0,229,195,0.15)" },
  { id: "beleza",       name: "Beleza & Pele",        icon: "‚ú®", color: "rgba(124,58,237,0.2)" },
  { id: "corpo",        name: "Corpo & Metabolismo",  icon: "üî•", color: "rgba(255,107,53,0.15)" },
  { id: "longevidade",  name: "Longevidade",          icon: "‚ö°", color: "rgba(0,168,255,0.15)" },
  { id: "libido",       name: "Libido",               icon: "üíÜ", color: "rgba(236,72,153,0.15)" },
  { id: "neuro",        name: "Neuro & Foco",         icon: "üß†", color: "rgba(99,102,241,0.2)" },
];

const PEPTIDES = [
  { id: "tirzepatida", name: "Tirzepatida 15mg",    desc: "Agonista dual GIP/GLP-1 para perda de peso avan√ßada",             category: "emagrecedores", price: 299 },
  { id: "retatrutida", name: "Retatrutida 15mg",    desc: "Agonista triplo GIP/GLP-1/Glucagon de nova gera√ß√£o",              category: "emagrecedores", price: 399 },
  { id: "ghkcu",       name: "GHK-Cu 50mg",         desc: "Pept√≠deo c√∫prico para col√°geno, pele e cabelo",                  category: "beleza",        price: 299 },
  { id: "glow",        name: "GLOW Blend 70mg",     desc: "BPC-157 + TB-500 + GHK-Cu ‚Äî stack completo recupera√ß√£o e beleza", category: "beleza",        price: 699 },
  { id: "snap8",       name: "SNAP-8 10mg",         desc: "Botox natural, reduz linhas de express√£o",                       category: "beleza",        price: 290 },
  { id: "tesamorelin", name: "Tesamorelin 5mg",     desc: "Queima de gordura visceral sem efeitos GLP-1",                   category: "corpo",         price: 299 },
  { id: "epithalon",   name: "Epithalon 10mg",      desc: "Longevidade celular, tel√¥meros, sono e energia",                 category: "longevidade",   price: 249 },
  { id: "pt141",       name: "PT-141 10mg",         desc: "Modulador de libido masculino e feminino",                       category: "libido",        price: 280 },
  { id: "selank",      name: "Selank 5mg",          desc: "Ansiol√≠tico pept√≠dico, foco e clareza mental",                   category: "neuro",         price: 199 },
];

// ‚îÄ‚îÄ persistence ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
// orders: [{ id, peptideId, buyerName, qty, createdAt }]
function loadOrders() {
  try { return JSON.parse(localStorage.getItem("vg-orders") || "[]"); } catch { return []; }
}
function saveOrders(orders) {
  localStorage.setItem("vg-orders", JSON.stringify(orders));
}

// ‚îÄ‚îÄ CALCULATOR DATA ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const CALC_PEP_DB = {
  tirzepatide:{ name:'Tirzepatida',  tags:['Injet√°vel','GLP-1/GIP'] },
  retatrutide:{ name:'Retatrutida',  tags:['Injet√°vel','GLP-1'] },
  ghkcu:      { name:'GHK-Cu',       tags:['Injet√°vel','T√≥pico','Pele'] },
  snap8:      { name:'SNAP-8',       tags:['T√≥pico','Creme/S√©rum'] },
  tesamorelin:{ name:'Tesamorelin',  tags:['Injet√°vel','GHRH'] },
  epithalon:  { name:'Epithalon',    tags:['Injet√°vel','Longevidade'] },
  pt141:      { name:'PT-141',       tags:['Injet√°vel','Libido'] },
  selank:     { name:'Selank',       tags:['Nasal','Ansiol√≠tico'] },
  bpc157:     { name:'BPC-157',      tags:['Injet√°vel','Reparo'] },
  tb500:      { name:'TB-500',       tags:['Injet√°vel','Sist√™mico'] },
  semaglutide:{ name:'Semaglutida',  tags:['Injet√°vel','GLP-1'] },
  ipamorelin: { name:'Ipamorelin',   tags:['Injet√°vel','GH'] },
  cjc1295:    { name:'CJC-1295',     tags:['Injet√°vel','GHRH'] },
  semax:      { name:'Semax',        tags:['Nasal','Cognitivo'] },
  aod9604:    { name:'AOD-9604',     tags:['Injet√°vel','Lip√≥lise'] },
  motsc:      { name:'MOTS-c',       tags:['Injet√°vel','Mitocondrial'] },
  humanin:    { name:'Humanin',      tags:['Injet√°vel','Longevidade'] },
  foxo4dri:   { name:'FOXO4-DRI',    tags:['Injet√°vel','Senol√≠tico'] },
  thymosinA1: { name:'Timosina Œ±1',  tags:['Injet√°vel','Imunidade'] },
  mt2:        { name:'Melanotan II', tags:['Injet√°vel','Melanocortina'] },
};

const CALC_DOSES = {
  bpc157:     { doses:[200,300,500,1000], freqs:[{l:'1x/dia',t:1},{l:'2x/dia',t:2},{l:'3x/dia',t:3}], dfi:1, vials:[2,5,10,60], unit:'mcg' },
  tb500:      { doses:[2000,5000],        freqs:[{l:'2x/sem',t:0.29},{l:'1x/sem',t:0.14},{l:'Quinzenal',t:0.07}], dfi:0, vials:[2,5,10,60], unit:'mcg' },
  ghkcu:      { doses:[1000,2000],        freqs:[{l:'1x/dia',t:1},{l:'2x/dia',t:2}], dfi:0, vials:[5,10,50,60], unit:'mcg' },
  snap8:      { topical:true, conc:'3‚Äì8%', veh:'creme/s√©rum' },
  semaglutide:{ doses:[250,500,1000,2400],freqs:[{l:'1x/sem',t:0.14}], dfi:0, vials:[1,2.4], unit:'mcg' },
  tirzepatide:{ doses:[2500,5000,10000,15000],freqs:[{l:'1x/sem',t:0.14}], dfi:0, vials:[2.5,5,10,15], unit:'mcg' },
  tesamorelin:{ doses:[1000,2000],        freqs:[{l:'1x/dia',t:1}], dfi:0, vials:[2,5], unit:'mcg' },
  retatrutide:{ doses:[2000,4000,8000,12000],freqs:[{l:'1x/sem',t:0.14}], dfi:0, vials:[2,5,12], unit:'mcg' },
  ipamorelin: { doses:[100,200,300],      freqs:[{l:'1x/dia',t:1},{l:'2x/dia',t:2},{l:'3x/dia',t:3}], dfi:1, vials:[2,5], unit:'mcg' },
  cjc1295:    { doses:[100,200,300],      freqs:[{l:'3x/dia',t:3},{l:'2x/dia',t:2},{l:'1x/sem (DAC)',t:0.14}], dfi:0, vials:[2,5], unit:'mcg' },
  epithalon:  { doses:[5000,10000],       freqs:[{l:'1x/dia (ciclo)',t:1},{l:'2x/dia (ciclo)',t:2}], dfi:0, vials:[10,20,60], unit:'mcg' },
  pt141:      { doses:[1000,2000],        freqs:[{l:'Pontual (uso)',t:1},{l:'2x/sem',t:0.29}], dfi:0, vials:[2,10], unit:'mcg' },
  selank:     { doses:[250,500,1000],     freqs:[{l:'1x/dia',t:1},{l:'2x/dia',t:2}], dfi:1, vials:[5,10,60], unit:'mcg', nasal:true },
  semax:      { doses:[200,300,600],      freqs:[{l:'1x/dia',t:1},{l:'2x/dia',t:2}], dfi:1, vials:[2,5], unit:'mcg', nasal:true },
  aod9604:    { doses:[300,500],          freqs:[{l:'1x/dia',t:1},{l:'2x/dia',t:2}], dfi:0, vials:[2,5], unit:'mcg' },
  motsc:      { doses:[5000,10000],       freqs:[{l:'1x/sem',t:0.14},{l:'2x/sem',t:0.29}], dfi:0, vials:[5,10,60], unit:'mcg' },
  humanin:    { doses:[2000,5000,10000],  freqs:[{l:'1x/sem',t:0.14},{l:'2x/sem',t:0.29}], dfi:0, vials:[5,10,60], unit:'mcg' },
  foxo4dri:   { doses:[1000,3000,5000],   freqs:[{l:'3x/sem (ciclo)',t:0.43}], dfi:0, vials:[5,10,60], unit:'mcg' },
  thymosinA1: { doses:[1600,3200],        freqs:[{l:'2x/sem',t:0.29},{l:'3x/sem',t:0.43}], dfi:0, vials:[5], unit:'mcg' },
  mt2:        { doses:[250,500,1000],     freqs:[{l:'Carregamento di√°rio',t:1},{l:'Manuten√ß√£o 2x/sem',t:0.29}], dfi:0, vials:[5,10,60], unit:'mcg' },
};

function formatDose(val, unit) {
  unit = unit || 'mcg';
  if (unit === 'mcg') {
    if (val >= 1000) return (val/1000).toFixed(val%1000===0?0:2) + ' mg';
    return val + ' mcg';
  }
  return val + ' ' + unit;
}

function CalcView() {
  const { useState: us, useRef: ur } = React;
  const [search, setSearch] = us('');
  const [dropOpen, setDropOpen] = us(false);
  const [selId, setSelId] = us(null);
  const [dose, setDose] = us(null);
  const [freq, setFreq] = us(null);
  const [vial, setVial] = us(null);
  const [bacMl, setBacMl] = us(2);
  const [manualDose, setManualDose] = us('');
  const [manualVial, setManualVial] = us('');
  const wrapRef = ur(null);

  const selPep = selId ? CALC_PEP_DB[selId] : null;
  const db     = selId ? CALC_DOSES[selId] : null;

  const allPeps = Object.entries(CALC_PEP_DB);
  const filtered = search.trim().length > 0
    ? allPeps.filter(([id, p]) => p.name.toLowerCase().includes(search.toLowerCase()) || (p.tags||[]).join(' ').toLowerCase().includes(search.toLowerCase()))
    : allPeps;

  function selectPep(id) {
    setSelId(id);
    setSearch('');
    setDropOpen(false);
    setDose(null);
    setFreq(null);
    setManualDose('');
    setManualVial('');
    const d = CALC_DOSES[id];
    if (d && !d.topical) {
      setFreq(d.freqs[d.dfi]);
      setVial(d.vials[0]);
    } else {
      setVial(null);
    }
  }

  function clearSel() {
    setSelId(null); setSearch(''); setDose(null); setFreq(null); setVial(null); setManualDose(''); setManualVial('');
  }

  // Results calc
  let results = null;
  let recon = null;
  if (dose && freq && !db?.topical) {
    const unit = db?.unit || 'mcg';
    const daily = dose * freq.t;
    results = {
      doseAppl: formatDose(dose, unit),
      freqLabel: freq.l,
      daily: formatDose(daily, unit),
      weekly: formatDose(daily * 7, unit),
      monthly: formatDose(daily * 30, unit),
    };
    if (vial) {
      const vialMcg = vial * 1000;
      const concMcgMl = vialMcg / bacMl;
      const volMl = dose / concMcgMl;
      const volUl = volMl * 1000;
      const ui = volMl * 100;
      const daysPerVial = vialMcg / (dose * freq.t);
      recon = {
        conc: concMcgMl >= 1000 ? (concMcgMl/1000).toFixed(2)+' mg/mL' : concMcgMl.toFixed(0)+' mcg/mL',
        vol: volUl >= 1000 ? volMl.toFixed(3)+' mL' : volUl.toFixed(1)+' ¬µL',
        ui: ui.toFixed(1)+' UI',
        duration: daysPerVial >= 1 ? Math.round(daysPerVial)+' dias' : Math.round(daysPerVial*24)+' horas',
        barPct: Math.min(100, (daysPerVial/90)*100),
      };
    }
  }

  return (
    <div className="calc-body">
      {/* LEFT */}
      <div>
        {/* Peptide selector */}
        <div className="calc-card">
          <div className="calc-card-title">üî¨ Pept√≠deo</div>
          <div className="calc-search-wrap" ref={wrapRef}>
            <input className="calc-input" placeholder="Buscar pept√≠deo..."
              value={search}
              onChange={e=>{ setSearch(e.target.value); setDropOpen(true); }}
              onFocus={()=>setDropOpen(true)}
            />
            {dropOpen && (
              <div className="calc-dropdown">
                {filtered.length === 0
                  ? <div className="calc-drop-item" style={{color:'var(--muted)'}}>Nenhum resultado</div>
                  : filtered.slice(0,14).map(([id, p]) => (
                    <div key={id} className="calc-drop-item" onMouseDown={()=>selectPep(id)}>
                      <span>{p.name}</span>
                      <em>{(p.tags||[])[0]||''}</em>
                    </div>
                  ))
                }
              </div>
            )}
          </div>
          {selPep && (
            <div className="calc-chip-selected">
              <div>
                <div className="calc-chip-name">{selPep.name}</div>
                <div className="calc-chip-cat">{(selPep.tags||[]).join(' ¬∑ ')}</div>
              </div>
              <button className="calc-chip-clear" onClick={clearSel}>√ó</button>
            </div>
          )}
        </div>

        {/* Dose */}
        {selId && db && !db.topical && (
          <div className="calc-card">
            <div className="calc-card-title">üíâ Dose por Aplica√ß√£o</div>
            <div className="calc-label">Doses mais comuns:</div>
            <div className="chips-grid">
              {db.doses.map(d => (
                <button key={d} className={`calc-chip-btn ${dose===d&&!manualDose?'active':''}`}
                  onClick={()=>{ setDose(d); setManualDose(''); }}>
                  {formatDose(d, db.unit)}
                </button>
              ))}
            </div>
            <div className="calc-manual-wrap">
              <input type="number" className="calc-manual-input" placeholder="Outra dose..."
                value={manualDose} min="0"
                onChange={e=>{ setManualDose(e.target.value); const v=parseFloat(e.target.value); if(!isNaN(v)&&v>0) setDose(v); }}
              />
              <div className="calc-manual-unit">{db.unit||'mcg'}</div>
            </div>
          </div>
        )}

        {/* Topical notice */}
        {selId && db && db.topical && (
          <div className="calc-topical-notice">
            üß¥ <strong>Pept√≠deo t√≥pico.</strong> Concentra√ß√£o t√≠pica: <strong>{db.conc}</strong>. N√£o h√° dose em mcg por aplica√ß√£o ‚Äî use na se√ß√£o de reconstitui√ß√£o para calcular a concentra√ß√£o do seu ve√≠culo cosm√©tico <em>({db.veh})</em>.
          </div>
        )}

        {/* Freq */}
        {selId && db && !db.topical && dose && (
          <div className="calc-card">
            <div className="calc-card-title">‚è±Ô∏è Frequ√™ncia</div>
            <div className="chips-grid">
              {db.freqs.map((f, i) => (
                <button key={i} className={`calc-chip-btn ${freq?.l===f.l?'active':''}`}
                  onClick={()=>setFreq(f)}>
                  {f.l}
                </button>
              ))}
            </div>
          </div>
        )}
      </div>

      {/* RIGHT */}
      <div>
        {!results && (
          <div className="calc-card">
            <div className="calc-placeholder">
              <div className="calc-placeholder-icon">üßÆ</div>
              <div className="calc-placeholder-text">Selecione um pept√≠deo e configure a dose para ver os c√°lculos</div>
            </div>
          </div>
        )}

        {results && (
          <div className="calc-card">
            <div className="calc-card-title">üìä Resultado</div>

            <div className="calc-result-row">
              <span className="calc-result-label">Dose por aplica√ß√£o</span>
              <span className="calc-result-value accent">{results.doseAppl}</span>
            </div>
            <div className="calc-result-row">
              <span className="calc-result-label">Frequ√™ncia</span>
              <span className="calc-result-value">{results.freqLabel}</span>
            </div>
            <div className="calc-result-row">
              <span className="calc-result-label">Dose di√°ria total</span>
              <span className="calc-result-value">{results.daily}</span>
            </div>
            <div className="calc-result-row">
              <span className="calc-result-label">Dose semanal total</span>
              <span className="calc-result-value">{results.weekly}</span>
            </div>
            <div className="calc-result-row">
              <span className="calc-result-label">Dose mensal (30 dias)</span>
              <span className="calc-result-value">{results.monthly}</span>
            </div>

            {/* Reconstitution */}
            <div className="calc-recon">
              <div className="calc-recon-title">üíß Reconstitui√ß√£o com √Ågua Bacteriost√°tica</div>

              <div className="calc-label">Tamanho do frasco:</div>
              <div className="chips-grid">
                {db.vials.map(v => (
                  <button key={v} className={`calc-chip-btn ${vial===v&&!manualVial?'active':''}`}
                    onClick={()=>{ setVial(v); setManualVial(''); }}>
                    {v} mg
                  </button>
                ))}
              </div>
              <div className="calc-manual-wrap" style={{marginBottom:12}}>
                <input type="number" className="calc-manual-input" placeholder="Outro tamanho..."
                  value={manualVial} min="0" step="0.5"
                  onChange={e=>{ setManualVial(e.target.value); const v=parseFloat(e.target.value); if(!isNaN(v)&&v>0) setVial(v); }}
                />
                <div className="calc-manual-unit">mg</div>
              </div>

              <div className="calc-bac-row">
                <span className="calc-bac-label">Volume de BAC water:</span>
                <input type="number" className="calc-bac-input" value={bacMl} min="0.5" max="10" step="0.5"
                  onChange={e=>setBacMl(parseFloat(e.target.value)||2)} />
                <span className="calc-manual-unit">mL</span>
              </div>

              {recon && (
                <div className="calc-recon-result">
                  <div className="calc-recon-row">
                    <span className="calc-recon-key">Concentra√ß√£o</span>
                    <span className="calc-recon-val">{recon.conc}</span>
                  </div>
                  <div className="calc-recon-row">
                    <span className="calc-recon-key">Volume por dose</span>
                    <span className="calc-recon-val">{recon.vol}</span>
                  </div>
                  <div className="calc-recon-row">
                    <span className="calc-recon-key">Unidades na seringa (UI)</span>
                    <span className="calc-recon-val">{recon.ui}</span>
                  </div>
                  <div className="calc-recon-row" style={{paddingTop:8,borderTop:'1px solid rgba(255,255,255,0.06)',marginTop:4}}>
                    <span className="calc-recon-key">Dura√ß√£o do frasco</span>
                    <span className="calc-recon-val">{recon.duration}</span>
                  </div>
                  <div className="calc-duration-bar">
                    <div className="calc-duration-fill" style={{width: recon.barPct+'%'}}></div>
                  </div>
                </div>
              )}
            </div>
          </div>
        )}
      </div>
    </div>
  );
}

function App() {
  const [orders, setOrders] = useState(loadOrders);
  const [view, setView]     = useState("catalog");
  const [activeCat, setActiveCat] = useState("all");
  const [myName, setMyName] = useState(() => localStorage.getItem("vg-nome") || "");
  const [toast, setToast]   = useState(null);
  const [modal, setModal]   = useState(null); // { peptide }
  const [formQty, setFormQty] = useState(1);
  const [formName, setFormName] = useState("");
  const [adminUnlocked, setAdminUnlocked] = useState(false);
  const [checkoutOpen, setCheckoutOpen] = useState(false);
  const [checkout, setCheckout] = useState(() => {
    try { return JSON.parse(localStorage.getItem('vg-checkout') || 'null') || { nomeCompleto:'', cpf:'', telefone:'', email:'', cep:'', estado:'', cidade:'', bairro:'', rua:'', numero:'', complemento:'', pagamento:'', observacoes:'' }; } catch { return { nomeCompleto:'', cpf:'', telefone:'', email:'', cep:'', estado:'', cidade:'', bairro:'', rua:'', numero:'', complemento:'', pagamento:'', observacoes:'' }; }
  });
  const [checkoutErrors, setCheckoutErrors] = useState({});
  const [disclaimer, setDisclaimer] = useState(false);

  function persistOrders(o) { setOrders(o); saveOrders(o); }

  // Freight calculation
  function calcFreight(estado, total) {
    if (total >= 1000) return { value: 0, label: 'Frete gr√°tis', reason: 'Pedido acima de R$ 1.000' };
    if (estado === 'SP' && total >= 600) return { value: 0, label: 'Frete gr√°tis', reason: 'SP + pedido acima de R$ 600 ‚Ä¢ Entrega no mesmo dia ou dia seguinte' };
    if (estado === 'SP') return { value: 60, label: 'R$ 60,00', reason: 'Via transportadora ‚Ä¢ Entrega no mesmo dia ou dia seguinte' };
    return { value: 60, label: 'R$ 60,00', reason: 'Via transportadora' };
  }

  async function fetchCep(cep) {
    const clean = cep.replace(/\D/g, '');
    if (clean.length !== 8) return;
    try {
      const r = await fetch(`https://viacep.com.br/ws/${clean}/json/`);
      const d = await r.json();
      if (!d.erro) {
        setCheckout(c => ({ ...c, estado: d.uf, cidade: d.localidade, bairro: d.bairro, rua: d.logradouro }));
      }
    } catch {}
  }

  function validateCheckout() {
    const errs = {};
    if (!checkout.nomeCompleto.trim()) errs.nomeCompleto = true;
    if (!/^\d{11}$/.test(checkout.cpf.replace(/\D/g,''))) errs.cpf = true;
    if (!checkout.telefone.trim()) errs.telefone = true;
    if (!checkout.email.trim() || !checkout.email.includes('@')) errs.email = true;
    if (!/^\d{8}$/.test(checkout.cep.replace(/\D/g,''))) errs.cep = true;
    if (!checkout.rua.trim()) errs.rua = true;
    if (!checkout.numero.trim()) errs.numero = true;
    if (!checkout.cidade.trim()) errs.cidade = true;
    if (!checkout.estado.trim()) errs.estado = true;
    if (!checkout.pagamento) errs.pagamento = true;
    setCheckoutErrors(errs);
    return Object.keys(errs).length === 0;
  }

  function saveCheckoutData(data) {
    setCheckout(data);
    localStorage.setItem('vg-checkout', JSON.stringify(data));
  }

  function updateCheckout(field, value) {
    const updated = { ...checkout, [field]: value };
    saveCheckoutData(updated);
  }

  function sendToWhatsApp() {
    if (!validateCheckout()) { showToast("Preencha todos os campos obrigat√≥rios", "error"); return; }
    if (!disclaimer) { showToast("Confirme o aviso legal para prosseguir", "error"); return; }
    const freight = calcFreight(checkout.estado, myTotal);
    const totalFinal = myTotal + freight.value;
    const itens = myOrders.map(o => {
      const p = PEPTIDES.find(x => x.id === o.peptideId);
      return `‚Ä¢ ${p.name} √ó${o.qty} = R$ ${(p.price * o.qty).toLocaleString('pt-BR')}`;
    }).join('\n');
    const pagamentoLabel = checkout.pagamento === 'pix' ? 'PIX (√† vista)' : checkout.pagamento === '2x' ? 'Cart√£o 2x (juros Mercado Pago)' : 'Cart√£o 3x (juros Mercado Pago)';
    const msg =
`üß¨ *PEDIDO VANGUARD PEPTIDES*

üë§ *Dados do Cliente*
Nome: ${checkout.nomeCompleto}
CPF: ${checkout.cpf}
Telefone: ${checkout.telefone}
E-mail: ${checkout.email}

üì¶ *Endere√ßo de Entrega*
${checkout.rua}, ${checkout.numero}${checkout.complemento ? ' ‚Äî '+checkout.complemento : ''}
${checkout.bairro} ‚Äî ${checkout.cidade}/${checkout.estado}
CEP: ${checkout.cep}

üõí *Itens*
${itens}

üí≥ *Pagamento:* ${pagamentoLabel}

üí∞ *Resumo*
Subtotal: R$ ${myTotal.toLocaleString('pt-BR')}
Frete: ${freight.value === 0 ? 'GR√ÅTIS' : 'R$ 60,00'} (${freight.reason})
*Total: R$ ${totalFinal.toLocaleString('pt-BR')}*${checkout.observacoes ? '\n\nüìù *Obs:* ' + checkout.observacoes : ''}`;
    window.open(`https://wa.me/447418333521?text=${encodeURIComponent(msg)}`, '_blank');
    // Limpar carrinho do cliente ap√≥s envio
    persistOrders(orders.filter(o => o.buyerName.toLowerCase() !== myName.toLowerCase()));
    setCheckoutOpen(false);
    setDisclaimer(false);
    showToast("Pedido enviado! üéâ");
    setView("catalog");
  }

  function showToast(msg, type = "success") {
    setToast({ msg, type });
    setTimeout(() => setToast(null), 3000);
  }

  function saveName(n) { setMyName(n); localStorage.setItem("vg-nome", n); }

  // Cart for current user
  const myOrders = useMemo(() => orders.filter(o => o.buyerName.toLowerCase() === myName.toLowerCase()), [orders, myName]);
  const myTotal  = useMemo(() => myOrders.reduce((s, o) => s + o.qty * (PEPTIDES.find(p => p.id === o.peptideId)?.price || 0), 0), [myOrders]);
  const cartCount = myOrders.reduce((s, o) => s + o.qty, 0);

  function openModal(peptide) {
    setModal({ peptide });
    setFormName(myName);
    setFormQty(1);
  }

  function handleAddToCart() {
    const name = formName.trim();
    if (!name || formQty < 1) return;
    const existing = orders.find(o => o.peptideId === modal.peptide.id && o.buyerName.toLowerCase() === name.toLowerCase());
    let newOrders;
    if (existing) {
      newOrders = orders.map(o => o === existing ? { ...o, qty: o.qty + formQty } : o);
      showToast(`${modal.peptide.name} atualizado no carrinho ‚úì`);
    } else {
      const newOrder = { id: Date.now(), peptideId: modal.peptide.id, buyerName: name, qty: formQty, createdAt: new Date().toISOString() };
      newOrders = [...orders, newOrder];
      showToast(`${modal.peptide.name} adicionado ao carrinho ‚úì`);
    }
    saveName(name);
    persistOrders(newOrders);
    setModal(null);
  }

  function updateQtyInCart(orderId, delta) {
    const order = orders.find(o => o.id === orderId);
    if (!order) return;
    const newQty = order.qty + delta;
    if (newQty <= 0) {
      persistOrders(orders.filter(o => o.id !== orderId));
      showToast("Item removido do carrinho", "info");
    } else {
      persistOrders(orders.map(o => o.id === orderId ? { ...o, qty: newQty } : o));
    }
  }

  function removeFromCart(orderId) {
    persistOrders(orders.filter(o => o.id !== orderId));
    showToast("Item removido", "info");
  }

  function handleAdminUnlock() {
    const pw = window.prompt("C√≥digo de administrador:");
    if (pw === ADMIN_PASS) { setAdminUnlocked(true); showToast("Admin desbloqueado ‚úì"); setView("admin"); }
    else showToast("C√≥digo incorreto!", "error");
  }

  function adminRemove(orderId) {
    persistOrders(orders.filter(o => o.id !== orderId));
    showToast("Pedido removido", "info");
  }

  function copyWhatsApp() {
    const grouped = {};
    orders.forEach(o => {
      const p = PEPTIDES.find(x => x.id === o.peptideId);
      if (!p) return;
      if (!grouped[p.name]) grouped[p.name] = [];
      grouped[p.name].push(o);
    });
    let text = "üß¨ *VANGUARD PEPTIDES ‚Äî PEDIDOS*\n\n";
    Object.entries(grouped).forEach(([pName, items]) => {
      const total = items.reduce((s, o) => s + o.qty, 0);
      text += `*${pName}* (${total} und)\n`;
      items.forEach(o => { text += `‚Ä¢ ${o.buyerName} √ó${o.qty}\n`; });
      text += "\n";
    });
    navigator.clipboard.writeText(text).then(() => showToast("Lista copiada! üìã")).catch(() => showToast("Erro ao copiar", "error"));
  }

  // ‚îÄ‚îÄ totals for admin ‚îÄ‚îÄ
  const totalRevenue = useMemo(() => orders.reduce((s, o) => s + o.qty * (PEPTIDES.find(p => p.id === o.peptideId)?.price || 0), 0), [orders]);
  const totalUnits   = useMemo(() => orders.reduce((s, o) => s + o.qty, 0), [orders]);
  const totalBuyers  = useMemo(() => new Set(orders.map(o => o.buyerName.toLowerCase())).size, [orders]);

  // ‚îÄ‚îÄ cat groups ‚îÄ‚îÄ
  const catGroups = CATEGORIES.filter(c => c.id !== "all").map(c => ({
    cat: c,
    peptides: (activeCat === "all" ? PEPTIDES : PEPTIDES.filter(p => p.category === activeCat)).filter(p => p.category === c.id)
  })).filter(g => g.peptides.length);

  function peptideCartQty(peptideId) {
    return myOrders.filter(o => o.peptideId === peptideId).reduce((s, o) => s + o.qty, 0);
  }

  return (
    <div>
      {toast && <div className={`toast ${toast.type}`}>{toast.msg}</div>}

      {/* CHECKOUT MODAL */}
      {checkoutOpen && (() => {
        const freight = calcFreight(checkout.estado, myTotal);
        const totalFinal = myTotal + freight.value;
        const isFree = freight.value === 0;
        return (
          <div className="modal-overlay" onClick={e=>{ if(e.target===e.currentTarget) setCheckoutOpen(false); }}>
            <div className="checkout-modal">
              <div className="modal-title">üì¶ Finalizar Pedido</div>
              <div className="modal-sub" style={{marginBottom:22}}>Preencha seus dados para enviar o pedido via WhatsApp.</div>

              {/* Dados pessoais */}
              <div className="checkout-section">
                <div className="checkout-section-title">üë§ Dados Pessoais</div>
                <div className="input-group">
                  <label>Nome completo *</label>
                  <input placeholder="Seu nome completo" value={checkout.nomeCompleto}
                    className={checkoutErrors.nomeCompleto ? 'error' : ''}
                    onChange={e=>updateCheckout('nomeCompleto', e.target.value)} />
                </div>
                <div className="input-row">
                  <div className="input-group">
                    <label>CPF *</label>
                    <input placeholder="000.000.000-00" value={checkout.cpf}
                      className={checkoutErrors.cpf ? 'error' : ''}
                      onChange={e=>updateCheckout('cpf', e.target.value)} />
                  </div>
                  <div className="input-group">
                    <label>Telefone *</label>
                    <input placeholder="(00) 00000-0000" value={checkout.telefone}
                      className={checkoutErrors.telefone ? 'error' : ''}
                      onChange={e=>updateCheckout('telefone', e.target.value)} />
                  </div>
                </div>
                <div className="input-group">
                  <label>E-mail *</label>
                  <input placeholder="seu@email.com" type="email" value={checkout.email}
                    className={checkoutErrors.email ? 'error' : ''}
                    onChange={e=>updateCheckout('email', e.target.value)} />
                </div>
              </div>

              {/* Endere√ßo */}
              <div className="checkout-section">
                <div className="checkout-section-title">üìç Endere√ßo de Entrega</div>
                <div className="input-row">
                  <div className="input-group">
                    <label>CEP *</label>
                    <input placeholder="00000-000" value={checkout.cep}
                      className={checkoutErrors.cep ? 'error' : ''}
                      onChange={e=>{ updateCheckout('cep', e.target.value); fetchCep(e.target.value); }} />
                  </div>
                  <div className="input-group">
                    <label>Estado</label>
                    <input placeholder="SP" value={checkout.estado}
                      className={checkoutErrors.estado ? 'error' : ''}
                      onChange={e=>updateCheckout('estado', e.target.value.toUpperCase())} />
                  </div>
                </div>
                <div className="input-group">
                  <label>Cidade</label>
                  <input placeholder="S√£o Paulo" value={checkout.cidade}
                    className={checkoutErrors.cidade ? 'error' : ''}
                    onChange={e=>updateCheckout('cidade', e.target.value)} />
                </div>
                <div className="input-group">
                  <label>Bairro</label>
                  <input placeholder="Centro" value={checkout.bairro}
                    onChange={e=>updateCheckout('bairro', e.target.value)} />
                </div>
                <div className="input-row">
                  <div className="input-group" style={{flex:2}}>
                    <label>Rua / Avenida *</label>
                    <input placeholder="Rua Exemplo" value={checkout.rua}
                      className={checkoutErrors.rua ? 'error' : ''}
                      onChange={e=>updateCheckout('rua', e.target.value)} />
                  </div>
                  <div className="input-group">
                    <label>N√∫mero *</label>
                    <input placeholder="123" value={checkout.numero}
                      className={checkoutErrors.numero ? 'error' : ''}
                      onChange={e=>updateCheckout('numero', e.target.value)} />
                  </div>
                </div>
                <div className="input-group">
                  <label>Complemento</label>
                  <input placeholder="Apto, bloco, refer√™ncia..." value={checkout.complemento}
                    onChange={e=>updateCheckout('complemento', e.target.value)} />
                </div>
              </div>

              {/* Pagamento */}
              <div className="checkout-section">
                <div className="checkout-section-title">üí≥ Forma de Pagamento</div>
                <div style={{display:'grid', gridTemplateColumns:'1fr 1fr 1fr', gap:8}}>
                  {[
                    { id:'pix',  icon:'‚ö°', label:'PIX', sub:'√Ä vista' },
                    { id:'2x',   icon:'üí≥', label:'2x Cart√£o', sub:'Juros Mercado Pago' },
                    { id:'3x',   icon:'üí≥', label:'3x Cart√£o', sub:'Juros Mercado Pago' },
                  ].map(opt => (
                    <div key={opt.id} onClick={()=>updateCheckout('pagamento', opt.id)}
                      style={{
                        border: `1px solid ${checkout.pagamento===opt.id ? 'rgba(0,229,195,0.4)' : (checkoutErrors.pagamento ? 'rgba(255,107,53,0.5)' : 'var(--border)')}`,
                        borderRadius:10, padding:'12px 10px', cursor:'pointer', textAlign:'center',
                        background: checkout.pagamento===opt.id ? 'rgba(0,229,195,0.07)' : 'rgba(255,255,255,0.02)',
                        transition:'all 0.18s'
                      }}>
                      <div style={{fontSize:'1.3rem', marginBottom:4}}>{opt.icon}</div>
                      <div style={{fontFamily:"'Syne',sans-serif", fontWeight:700, fontSize:'0.82rem', color: checkout.pagamento===opt.id ? 'var(--accent)' : 'var(--text)'}}>{opt.label}</div>
                      <div style={{fontSize:'0.65rem', color:'var(--muted)', marginTop:2}}>{opt.sub}</div>
                    </div>
                  ))}
                </div>
              </div>

              {/* Resumo + frete */}
              <div className="checkout-section">
                <div className="checkout-section-title">üí∞ Resumo do Pedido</div>
                <div style={{display:'flex',justifyContent:'space-between',fontSize:'0.83rem',color:'var(--muted)',marginBottom:8}}>
                  <span>Subtotal ({myOrders.reduce((s,o)=>s+o.qty,0)} itens)</span>
                  <span style={{color:'var(--text)',fontFamily:"'Space Mono',monospace"}}>R$ {myTotal.toLocaleString('pt-BR')}</span>
                </div>
                <div className={`freight-box ${isFree?'free':'paid'}`}>
                  <div className="freight-label">
                    <strong>{isFree ? 'üéâ Frete Gr√°tis' : 'üöö Frete'}</strong>
                    <small>{freight.reason}</small>
                  </div>
                  <div className={`freight-value ${isFree?'free':'paid'}`}>{isFree ? 'GR√ÅTIS' : 'R$ 60'}</div>
                </div>
                {!isFree && myTotal < 600 && (
                  <div style={{fontSize:'0.75rem',color:'var(--muted)',marginTop:6,padding:'8px 12px',background:'rgba(0,168,255,0.04)',border:'1px solid rgba(0,168,255,0.12)',borderRadius:8}}>
                    üí° Faltam <strong style={{color:'var(--accent2)'}}>R$ {(600 - myTotal).toLocaleString('pt-BR')}</strong> para frete gr√°tis em SP, ou <strong style={{color:'var(--accent)'}}>R$ {(1000 - myTotal).toLocaleString('pt-BR')}</strong> para frete gr√°tis em qualquer estado.
                  </div>
                )}
                <div className="order-total-row">
                  <span className="order-total-label">Total final</span>
                  <span className="order-total-value">R$ {totalFinal.toLocaleString('pt-BR')}</span>
                </div>
              </div>

              {/* Observa√ß√µes */}
              <div className="checkout-section">
                <div className="checkout-section-title">üìù Observa√ß√µes</div>
                <div className="input-group">
                  <label>Alguma instru√ß√£o especial? (opcional)</label>
                  <input placeholder="Ex: pode entregar ap√≥s 18h, port√£o azul..." value={checkout.observacoes||''}
                    onChange={e=>updateCheckout('observacoes', e.target.value)} />
                </div>
              </div>

              {/* Disclaimer */}
              <div style={{
                background: disclaimer ? 'rgba(0,229,195,0.04)' : 'rgba(255,107,53,0.04)',
                border: `1px solid ${disclaimer ? 'rgba(0,229,195,0.2)' : 'rgba(255,107,53,0.2)'}`,
                borderRadius:10, padding:'14px 16px', marginBottom:16, cursor:'pointer',
                display:'flex', gap:12, alignItems:'flex-start', transition:'all 0.2s'
              }} onClick={()=>setDisclaimer(d=>!d)}>
                <div style={{
                  width:20, height:20, borderRadius:5, flexShrink:0, marginTop:1,
                  border: `2px solid ${disclaimer ? 'var(--accent)' : 'rgba(255,107,53,0.5)'}`,
                  background: disclaimer ? 'var(--accent)' : 'transparent',
                  display:'flex', alignItems:'center', justifyContent:'center',
                  fontSize:'0.75rem', color:'#050a0e', fontWeight:700, transition:'all 0.2s'
                }}>{disclaimer ? '‚úì' : ''}</div>
                <div style={{fontSize:'0.77rem', color:'var(--muted)', lineHeight:1.6}}>
                  <strong style={{color:'var(--text)'}}>Aviso Legal *</strong><br/>
                  Declaro que tenho 18 anos ou mais e que este produto √© adquirido exclusivamente para fins de pesquisa cient√≠fica. N√£o me responsabilizo pelo uso indevido dos compostos.
                </div>
              </div>

              <button className="modal-confirm-btn" onClick={sendToWhatsApp}>
                ENVIAR PEDIDO VIA WHATSAPP ‚Üí
              </button>
              <button className="modal-cancel-btn" onClick={()=>setCheckoutOpen(false)}>cancelar</button>
            </div>
          </div>
        );
      })()}

      {/* NAV */}
      <nav>
        <div className="logo">
          <div className="logo-dot"></div>
          VANGUARD
          <span className="logo-sub">PEPTIDES</span>
        </div>
        <div className="nav-right">
          <button className={`nav-btn ${view==="catalog"?"active":""}`} onClick={()=>setView("catalog")}>CAT√ÅLOGO</button>
          <button className={`nav-btn ${view==="calc"?"active":""}`} onClick={()=>setView("calc")}>üíä CALC</button>
          <button className={`cart-nav-btn ${view==="cart"?"active":""}`} onClick={()=>setView("cart")}>
            üõí CARRINHO
            {cartCount > 0 && <span className="cart-badge">{cartCount}</span>}
          </button>
          <button className="nav-btn" onClick={adminUnlocked ? ()=>setView("admin") : handleAdminUnlock}>
            {adminUnlocked ? "ADMIN ‚úì" : "ADMIN"}
          </button>
        </div>
      </nav>

      <div className="app">
        {/* SIDEBAR */}
        <aside>
          <label className="name-input-label">Seu nome</label>
          <input className="name-input" value={myName} onChange={e=>saveName(e.target.value)} placeholder="Como quer ser identificado" />

          <div className="sidebar-section-title">Categorias</div>
          {CATEGORIES.map(c => {
            const count = c.id === "all" ? PEPTIDES.length : PEPTIDES.filter(p => p.category === c.id).length;
            return (
              <button key={c.id} className={`cat-btn ${activeCat===c.id?"active":""}`}
                onClick={()=>{ setActiveCat(c.id); setView("catalog"); }}>
                <div className="cat-btn-icon" style={{background: c.color}}>{c.icon}</div>
                <span className="cat-btn-name">{c.name}</span>
                <span className="cat-btn-count">{count}</span>
              </button>
            );
          })}

          {myName && myTotal > 0 && <>
            <div className="sidebar-divider"></div>
            <div className="cart-mini" onClick={()=>setView("cart")}>
              <div className="cart-mini-label">MEU CARRINHO</div>
              <div className="cart-mini-total">R$ {myTotal.toLocaleString("pt-BR")}</div>
              <div className="cart-mini-sub">{myOrders.length} produto{myOrders.length!==1?"s":""} ¬∑ sem frete</div>
            </div>
          </>}

          <div style={{flex:1}}></div>
          <button className="copy-btn" onClick={copyWhatsApp}>üìã Copiar lista WhatsApp</button>
        </aside>

        {/* MAIN */}
        <main>
          {/* CATALOG */}
          <div className={`view ${view==="catalog"?"visible":""}`}>
            <div className="page-tag">‚ñ∏ CAT√ÅLOGO</div>
            <div className="page-title">Pept√≠deos Premium</div>
            <div className="page-sub">Adicione produtos ao carrinho e finalize seu pedido.</div>

            {catGroups.map(({ cat, peptides }) => (
              <div className="cat-section" key={cat.id}>
                <div className="cat-section-header">
                  <div className="cat-section-icon" style={{background: cat.color}}>{cat.icon}</div>
                  <div className="cat-section-title">{cat.name}</div>
                  <div className="cat-section-count">{peptides.length} produto{peptides.length!==1?"s":""}</div>
                </div>
                <div className="products-grid">
                  {peptides.map(peptide => {
                    const inCartQty = peptideCartQty(peptide.id);
                    const cartOrder = myOrders.find(o => o.peptideId === peptide.id);
                    return (
                      <div key={peptide.id} className={`product-card ${inCartQty>0?"in-cart":""}`}>
                        <div className="product-card-name">{peptide.name}</div>
                        <div className="product-card-desc">{peptide.desc}</div>
                        <div className="product-card-price">R$ {peptide.price.toLocaleString("pt-BR")} <span>/ampola</span></div>

                        {inCartQty > 0 && cartOrder && (
                          <div className="in-cart-indicator">
                            <span className="in-cart-text">‚úì NO CARRINHO</span>
                            <div className="in-cart-qty-controls">
                              <button className="qty-control-btn" onClick={()=>updateQtyInCart(cartOrder.id, -1)}>‚àí</button>
                              <span className="qty-control-num">{inCartQty}</span>
                              <button className="qty-control-btn" onClick={()=>updateQtyInCart(cartOrder.id, +1)}>+</button>
                            </div>
                          </div>
                        )}

                        <button className="add-to-cart-btn" onClick={()=>openModal(peptide)}>
                          {inCartQty > 0 ? "+ ADICIONAR MAIS" : "ADICIONAR AO CARRINHO"}
                        </button>
                      </div>
                    );
                  })}
                </div>
              </div>
            ))}
          </div>

          {/* CART */}
          <div className={`view ${view==="cart"?"visible":""}`}>
            <div className="page-tag">‚ñ∏ CARRINHO</div>
            <div className="page-title">{myName || "Carrinho"}</div>
            <div className="page-sub">Revise seus produtos antes de confirmar o pedido.</div>

            {!myName && (
              <div className="cart-empty">
                <div className="cart-empty-icon">üë§</div>
                <div className="cart-empty-title">Digite seu nome na sidebar</div>
                <div className="cart-empty-sub">Precisamos identificar seu pedido.</div>
              </div>
            )}

            {myName && myOrders.length === 0 && (
              <div className="cart-empty">
                <div className="cart-empty-icon">üõí</div>
                <div className="cart-empty-title">Carrinho vazio</div>
                <div className="cart-empty-sub">V√° ao cat√°logo e adicione seus pept√≠deos.</div>
              </div>
            )}

            {myName && myOrders.length > 0 && (() => {
              return (
                <div>
                  <div className="cart-items">
                    {myOrders.map(order => {
                      const p = PEPTIDES.find(x => x.id === order.peptideId);
                      if (!p) return null;
                      const cat = CATEGORIES.find(c => c.id === p.category);
                      return (
                        <div key={order.id} className="cart-item-card">
                          <div className="cart-item-emoji" style={{background: cat?.color || "rgba(0,229,195,0.15)"}}>{cat?.icon}</div>
                          <div className="cart-item-info">
                            <div className="cart-item-name">{p.name}</div>
                            <div className="cart-item-buyer">R$ {p.price}/ampola</div>
                          </div>
                          <div className="cart-item-qty-wrap">
                            <button className="qty-control-btn" onClick={()=>updateQtyInCart(order.id, -1)}>‚àí</button>
                            <span className="qty-control-num" style={{fontSize:"0.9rem",minWidth:24}}>{order.qty}</span>
                            <button className="qty-control-btn" onClick={()=>updateQtyInCart(order.id, +1)}>+</button>
                          </div>
                          <div className="cart-item-price">R$ {(p.price * order.qty).toLocaleString("pt-BR")}</div>
                          <button className="cart-item-remove" onClick={()=>removeFromCart(order.id)} title="Remover">‚úï</button>
                        </div>
                      );
                    })}
                  </div>

                  <div className="cart-summary">
                    {myOrders.map(order => {
                      const p = PEPTIDES.find(x => x.id === order.peptideId);
                      if (!p) return null;
                      return (
                        <div key={order.id} className="cart-summary-row">
                          <span>{p.name} √ó{order.qty}</span>
                          <span>R$ {(p.price * order.qty).toLocaleString("pt-BR")}</span>
                        </div>
                      );
                    })}
                    <div className="cart-summary-total">
                      <div className="cart-summary-total-label">Total (s/ frete)</div>
                      <div className="cart-summary-total-value">R$ {myTotal.toLocaleString("pt-BR")}</div>
                    </div>
                  </div>

                  <div className="cart-note">
                    üíß <strong>√Ågua bacteriost√°tica inclusa gratuitamente</strong> em todos os pedidos. Frete calculado e informado ap√≥s confirma√ß√£o.
                  </div>

                  <button className="checkout-btn" onClick={()=>setCheckoutOpen(true)}>
                    FINALIZAR PEDIDO ‚Üí
                  </button>
                </div>
              );
            })()}
          </div>

          {/* ADMIN */}
          <div className={`view ${view==="admin"?"visible":""}`}>
            <div className="page-tag">‚ñ∏ ADMINISTRADOR</div>
            <div className="page-title">Painel Admin</div>
            <div className="page-sub">Vis√£o geral de todos os pedidos recebidos.</div>

            <div className="admin-grid">
              <div className="admin-stat"><div className="admin-stat-label">Compradores</div><div className="admin-stat-value">{totalBuyers}</div></div>
              <div className="admin-stat"><div className="admin-stat-label">Total unidades</div><div className="admin-stat-value">{totalUnits}</div></div>
              <div className="admin-stat"><div className="admin-stat-label">Receita bruta</div><div className="admin-stat-value">R$ {totalRevenue.toLocaleString("pt-BR")}</div></div>
              <div className="admin-stat"><div className="admin-stat-label">Itens no sistema</div><div className="admin-stat-value">{orders.length}</div></div>
            </div>

            <div className="admin-actions">
              <button className="admin-action-btn" onClick={copyWhatsApp}>üìã Copiar lista WhatsApp</button>
              <button className="admin-action-btn danger" onClick={()=>{ if(window.confirm("Apagar TODOS os pedidos?")){ persistOrders([]); showToast("Pedidos apagados", "info"); }}}>üóëÔ∏è Limpar tudo</button>
            </div>

            {orders.length === 0 && (
              <div style={{textAlign:"center",color:"var(--muted)",padding:40,fontSize:"0.85rem"}}>Nenhum pedido ainda</div>
            )}

            {orders.length > 0 && (
              <div className="admin-table">
                <div className="admin-table-header">
                  <span>Produto</span>
                  <span>Comprador</span>
                  <span>Qtd</span>
                  <span>Total</span>
                  <span></span>
                </div>
                {orders.map(order => {
                  const p = PEPTIDES.find(x => x.id === order.peptideId);
                  if (!p) return null;
                  return (
                    <div key={order.id} className="admin-table-row">
                      <div>
                        <div className="admin-row-name">{p.name}</div>
                        <div className="admin-row-buyer">R$ {p.price}/un</div>
                      </div>
                      <div style={{color:"#a8bfc9"}}>{order.buyerName}</div>
                      <div className="admin-row-qty">√ó{order.qty}</div>
                      <div className="admin-row-total">R$ {(p.price*order.qty).toLocaleString("pt-BR")}</div>
                      <div><button className="admin-remove-btn" onClick={()=>adminRemove(order.id)}>remover</button></div>
                    </div>
                  );
                })}
                <div style={{padding:"14px 20px",borderTop:"1px solid var(--border)",display:"flex",justifyContent:"flex-end",gap:24,fontFamily:"'Space Mono',monospace",fontSize:"0.78rem"}}>
                  <span style={{color:"var(--muted)"}}>TOTAL GERAL</span>
                  <span style={{color:"var(--accent)",fontWeight:700}}>R$ {totalRevenue.toLocaleString("pt-BR")}</span>
                </div>
              </div>
            )}
          </div>

          {/* CALCULADORA */}
          <div className={`view ${view==="calc"?"visible":""}`}>
            <div className="page-tag">‚ñ∏ CALCULADORA</div>
            <div className="page-title">Calculadora de Dose</div>
            <div className="page-sub">Calcule dose, reconstitui√ß√£o com √°gua bacteriost√°tica e dura√ß√£o do frasco.</div>
            <CalcView />
          </div>
        </main>
      </div>

      {/* ADD TO CART MODAL */}
      {modal && (
        <div className="modal-overlay" onClick={()=>setModal(null)}>
          <div className="modal" onClick={e=>e.stopPropagation()}>
            <div style={{fontFamily:"'Space Mono',monospace",fontSize:"0.62rem",color:"var(--accent)",letterSpacing:"1.5px",marginBottom:6}}>
              {CATEGORIES.find(c=>c.id===modal.peptide.category)?.icon} {CATEGORIES.find(c=>c.id===modal.peptide.category)?.name?.toUpperCase()}
            </div>
            <div className="modal-title">{modal.peptide.name}</div>
            <div className="modal-sub">{modal.peptide.desc}</div>

            <label className="modal-label">Seu nome</label>
            <input className="modal-input" value={formName} onChange={e=>setFormName(e.target.value)} placeholder="Como deseja ser identificado" autoFocus />

            <label className="modal-label">Quantidade</label>
            <div className="qty-row">
              <button className="qty-big-btn" onClick={()=>setFormQty(q=>Math.max(1,q-1))}>‚àí</button>
              <div className="qty-big-num">{formQty}</div>
              <button className="qty-big-btn" onClick={()=>setFormQty(q=>q+1)}>+</button>
            </div>

            <div className="price-preview">
              <div>
                <div className="price-preview-label">{formQty} ampola{formQty!==1?"s":""}</div>
                <div style={{fontSize:"0.7rem",color:"var(--muted)",marginTop:2}}>R$ {modal.peptide.price} √ó {formQty}</div>
              </div>
              <div className="price-preview-value">R$ {(modal.peptide.price * formQty).toLocaleString("pt-BR")}</div>
            </div>

            <button className="modal-confirm-btn" onClick={handleAddToCart} disabled={!formName.trim()}>
              üõí ADICIONAR AO CARRINHO
            </button>
            <button className="modal-cancel-btn" onClick={()=>setModal(null)}>CANCELAR</button>
          </div>
        </div>
      )}
    </div>
  );
}

ReactDOM.createRoot(document.getElementById("root")).render(<App />);
</script>
</body>
</html>
